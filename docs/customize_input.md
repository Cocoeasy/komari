## Customize input
The bot currently does not use advanced input method such as a driver like `Interception` but only a normal Win32 API `SendInput`, so you should use at least be aware/cautious and use the bot default input mode at your own risk. If you want more security, customizing the bot with hardware input (KMBox, Arduino,...) using `Rpc` method provided in the `Settings` tab is recommended. However, this currently requires some scripting:
  - Use the language of your choice to write, host it and provide the server URL to the bot as long as you can generate gRPC stubs
  - Check this [example](https://github.com/sasanquaa/maple-bot/tree/master/examples/python):
      - Note that this example is tested on the same PC so `http://localhost:5001` is used
      - If you host the input server on the game PC and the bot runs on a different PC, you need to change the IP, port-forward, etc.. so that the bot can connect to the input server on the game PC
      - Downloading `app-debug-[cpu/gpu].zip` version if needed to check if the bot connects successfully by looking at the log
  - (Just an idea, not tested) For local PC, using Unix socket can likely improve input latency instead of gRPC default HTTP

![Customize Input](https://github.com/sasanquaa/komari/blob/master/.github/images/customize_input.png?raw=true)

## Random delay (from v0.13)
- For the default method using `SendInput`, the bot also has delay for each key stroke by default
- When customizing input with `Rpc` method, on `Send` request, you will receive a `down_ms` delay in milliseconds for the 
**down stroke** of the key. So after sending the down key, you should sleep for `down_ms` and send the up key. This delay
is generated by the bot via a seed that is generated the first time the bot is run. Alternatively, if you wish to not use 
this delay, you can instead use the `seed` provided in the `Init` request that is called each time the bot connects to your 
input service.

## Mouse (from v0.13)
Mouse is required for auto-revive, familiars swapping and cash shop features. The behavior depends on both the coordinate system and whether the bot and input server are running on the same PC. There are two coordinate modes:
- `Relative`: Coordinates (x, y) are relative to the game window the bot captures.
- `Screen`: Coordinates (x, y) are relative to the full monitor screen where the game window is in.

In `Init()`, return the coordinate system that matches your setup:
```python
return KeyInitResponse(mouse_coordinate=Coordinate.Relative)
```

Mouse input coordinates sent by the bot need to be transformed to match your local input system (like KMBox or SendInput):
- If bot and input server are on the same PC, use `Coordinate.Screen`
- If on different PCs, use `Coordinate.Relative` and apply offsets (crop top/left) if needed to adjust for borders or UI elements introduced by remote apps (e.g. Sunshine/Moonlight)

There are three mouse actions the bot wants the input server to perform:
- `Move`: Move the cursor to (x, y)
- `Click`: Move the cursor to (x, y) and click
- `ScrollDown`: Move the cursor to (x, y) and scroll down

Refers to examples for more details.
